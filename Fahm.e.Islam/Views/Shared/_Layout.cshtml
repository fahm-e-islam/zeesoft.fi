<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title</title>
    <link href="~/Content/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/css/Style.css" rel="stylesheet" />
    <link href="~/Content/Site.css" rel="stylesheet" />
    <link href="~/Content/kendo/kendo.default.min.css" rel="stylesheet" />
    <link href="~/Content/kendo/kendo.common.min.css" rel="stylesheet" />
    <link href="~/Content/typeahead.css" rel="stylesheet" />
    <link rel="shortcut icon" type="image/x-icon" href="~/favicon.gif"/>
    <link href="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker3.css" rel="stylesheet" />
    @*<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>*@
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.11.4.min.js"></script>
    <script src="~/Content/js/bootstrap.js"></script>

    @*<script src="~/Content/js/typeahead.js"></script>*@
    <script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.js"></script>
            @Scripts.Render("~/bundles/jqueryval")
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <script src="~/Content/js/jquery.countdown.min.js"></script>
    <script src="~/Scripts/kendo/kendo.all.min.js"></script>
    <script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>

     <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
 
    @*http://www.texotela.co.uk/code/jquery/select/*@
      @*<script src="~/Scripts/plugins/selectboxes/jquery.selectboxes.min.js"></script>*@
    <style>
     
    </style>
</head>
<body>
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            
                <a class="navabr-brand" href="/Home/Index"><img src="~/Content/pics/logo.gif" style="width:180px;" /> </a>

            </div>
            <div class="navbar-collapse collapse">
                 @if(ZeeSoft.Web.MVC.FI.Models.SessionCache.CurrentUser != null)
                { 
                   
               
                    if (ZeeSoft.Web.MVC.FI.Models.SessionCache.IsAdmin)
                    {
                        <ul class="nav navbar-nav navbar-right" style="margin-left: 100px;">                        
                            <li>
                                <a href="/User/Home"><span class="glyphicon glyphicon-home text-center" style="font-size: medium;"><br> Home</span></a>
                            </li>
                            <li>
                                <a href="/Teacher/Index"><span class="glyphicon glyphicon-blackboard text-center" style="font-size: medium;"><br> Teachers</span></a>
                            </li>
                            <li>
                                <a href="/Student/Index"><span class="glyphicon glyphicon-user text-center" style="font-size: medium;"><br> Students</span></a>
                            </li>
                            <li>
                                <a href="/Course/Index"><span class="glyphicon glyphicon-user text-center" style="font-size: medium;"><br> Courses</span></a>
                            </li>
                            <li>
                                <a href="/Class/Index"><span class="glyphicon glyphicon-user text-center" style="font-size: medium;"><br> Classes</span></a>
                            </li>
                            <li>
                                <a href="/ActivityCalendar/Index?period=2"><span class="glyphicon glyphicon-user text-center" style="font-size: medium;"><br> Activity&nbsp;Calendar</span></a>
                            </li>
                            
                            <li>
                                <a href="/User/Logout"><span class="glyphicon glyphicon-log-out text-center" style="font-size: medium;"><br> Logout</span></a>
                            </li>
                        </ul>
               
                    }
                    else if (ZeeSoft.Web.MVC.FI.Models.SessionCache.IsUser)
                    {
                        <ul class="nav navbar-nav navbar-right" style="margin-left: 100px;">                        
                            <li><span class="badge">Welcome @ZeeSoft.Web.MVC.FI.Models.SessionCache.CurrentUser.UserName</span></li>

                            @if (ZeeSoft.Web.MVC.FI.Models.SessionCache.IsTeacher)
                            {
                                
                            <li>
                                <a href="/Teacher/Home"><span class="glyphicon glyphicon-home text-center" style="font-size: medium;"><br> Home</span></a>
                            </li>
                            <li>
                                <a href="/Teacher/NewSession"><span class="glyphicon glyphicon-home text-center" style="font-size: medium;"><br>New&nbsp;Session</span></a>
                            </li>
                            <li>
                                <a href="/Teacher/Files"><span class="glyphicon glyphicon-home text-center" style="font-size: medium;"><br>Files</span></a>
                            </li>                                 
                    
                                
                            }
                            else if(ZeeSoft.Web.MVC.FI.Models.SessionCache.IsStudent) { 
                                
                            <li>
                                <a href="/Student/Home"><span class="glyphicon glyphicon-home text-center" style="font-size: medium;"><br> Home</span></a>
                            </li>
                            <li>
                                <a href="/Student/Files"><span class="glyphicon glyphicon-home text-center" style="font-size: medium;"><br>Files</span></a>
                            </li>
                    
                                
                            }
                            <li>
                                <a href="/User/Inbox"><span class="glyphicon glyphicon-inbox text-center" style="font-size: medium;"><br>Inbox<span class="badge" id="spNewMsg">@ZeeSoft.Web.MVC.FI.Models.SessionCache.CurrentUser_Dashboard.NewMessages</span></span></a>
                            </li>
                            <li>
                                <a href="/User/Logout"><span class="glyphicon glyphicon-log-out text-center" style="font-size: medium;"><br> Logout</span></a>
                            </li>
                        </ul> 
                    }
                }  else {
                        <ul class="nav navbar-nav navbar-right" style="margin-left: 100px;">
                        <li>
                            <a href="/Home/Index"><span class="glyphicon glyphicon-home text-center" style="font-size: medium;"><br> Home</span></a>
                        </li>
                        <li>
                            <a href="/Home/About"><span class="glyphicon glyphicon-info-sign text-center" style="font-size: medium;"><br> About</span></a>
                        </li>
                        <li>
                            <a href="/Home/Course"><span class="glyphicon glyphicon-book text-center" style="font-size: medium;"><br> Courses</span></a>
                        </li>
                        <li>
                            <a href="/Home/Cost"><span class="glyphicon glyphicon-gbp text-center" style="font-size: medium;"><br>Cost</span></a>
                        </li>
                        <li>
                            <a href="/Query/Index"><span class="glyphicon glyphicon-envelope text-center" style="font-size: medium;"><br>ContactUs</span></a>
                        </li>
                        <li>
                            <a href="/User/Login"><span class="glyphicon glyphicon-log-in text-center" style="font-size: medium;"><br>Login</span></a>
                        </li>
                </ul>
                }
            </div>
            </div>
        </div>
    <div class="container body-content">
        <div class="panel panel-default">
            <div class="panel-body">
                @RenderBody()
            </div>
        </div>
        <hr />
        <footer>
            <p>&copy; @DateTime.Now.Year - Fahm-e-Islam</p>
        </footer>
    </div>
    @Scripts.Render("~/bundles/typeahead")
    <script src="~/Scripts/typeahead.mvc.model.js" />
    @RenderSection("scripts", required: false)
</body>

</html>

<script>
    @{ 
         string UserId = string.Empty;
         if (ZeeSoft.Web.MVC.FI.Models.SessionCache.CurrentUser != null) {       
                UserId = SessionCache.CurrentUser.DbId.ToString();
         }
     }
    window.UserId = "@UserId";
    function NotifyToWhomItConcerns(key,json) {
        //alert("notifying...");
        window.hub.server.send(key,json);

    }
    $(function () {
        // Reference the auto-generated proxy for the hub.  
        window.hub = $.connection.fIHub;
        // Create a function that the hub can call back to display messages.
        window.hub.client.NewMessageCreated = function (receivers, messageJson) {
            if (receivers.indexOf(window.UserId)!=-1)
                $('#spNewMsg').text(parseInt($('#spNewMsg').text())+1);
        };

        // Start the connection.
        $.connection.hub.start().done(function () {
            //window.chat.server.send("newmsg", "111");

            //$('#sendmessage').click(function () {
            //    // Call the Send method on the hub. 
            //    chat.server.send($('#displayname').val(), $('#message').val());
            //    // Clear text box and reset focus for next comment. 
            //    $('#message').val('').focus();
            //});
        });
    });
    $(document).ready(function () {
        $(".datetype").datepicker();

        //$('input.typeahead').typeahead({
        //    name: 'accounts',
        //    local: ['Audi', 'BMW', 'Bugatti', 'Ferrari', 'Ford', 'Lamborghini', 'Mercedes Benz', 'Porsche', 'Rolls-Royce', 'Volkswagen']
        //});
        $(".panel-heading").addClass("collapsed");
    });
</script>